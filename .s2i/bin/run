#!/bin/sh

JAVA_OPTIONS=-Dquarkus.http.host=0.0.0.0 \
    -Dcom.sun.management.jmxremote.rmi.port=9091 \
    -Dcom.sun.management.jmxremote=true \
    -Dcom.sun.management.jmxremote.port=9091 \
    -Dcom.sun.management.jmxremote.ssl=false \
    -Dcom.sun.management.jmxremote.authenticate=false \
    -Dcom.sun.management.jmxremote.local.only=false

if [ -z "${RMI_SERVER_HOSTNAME}" ]; then
    JAVA_OPTIONS="${JAVA_OPTIONS} -Djava.rmi.server.hostname=${RMI_SERVER_HOSTNAME}"
fi
export JAVA_OPTIONS

echo "Starting application with /opt/run-java/run-java.sh"
exec /opt/run-java/run-java.sh /deployments/*-runner.jar
